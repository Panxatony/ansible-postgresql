---
# Basic settings
el_version: 7
postgresql_version:

pg_data: /var/lib/pgsql/{{ postgresql_version }}/data
pg_conf: /var/lib/pgsql/{{ postgresql_version }}/data
postgresql_admin_user: postgres

postgresql_conf:
  listen_addresses: "'*'"
  max_connections: 250
  shared_buffers: "{{ (ansible_memory_mb.real.total/4) |round|int }}MB"
  shared_preload_libraries: "'pg_stat_statements,powa,pg_stat_kcache,pg_qualstats'"
  pg_stat_statements.track: "all"

# Defaults for mamonsu
zabbix_server:
zabbix_server_port: 10051
# moved to template
agent_name: "{% if ansible_dns.search is defined %}{{ inventory_hostname }}.{{ ansible_dns.search[0] }}{% else %}{{ inventory_hostname }}{% endif %}"

# Defaults for pgbouncer.
pool_mode: "transaction"
# to make pool mode transaction work wiht trashcode
server_reset_query_always: "1"
ignore_startup_parameters: extra_float_digits
max_client_conn: 300
